<!DOCTYPE html>

<head>

  <title>Robin the Bank - ATM Simulation</title>
  <link rel="stylesheet" href="../css/index.css">
</head>

<body>
  <div class="container">
    <img src="../misc/banklogo.png" alt="Robin the Bank Logo" class="logo">
    <h1>ATM Simulation</h1>
    <h2>Manage Your Transactions</h2>

    <form action="../functions/atmsimfunc.php" method="post">
      <input type="text" name="username" id="atmAccount" placeholder="Account Number" required>
      <input type="number" name="amount" id="atmAmount" placeholder="Transaction Amount" min="0.01" step="0.01"
        required>
      <input type="submit" class="button" Value="Deposit" name="deposit">
      <input type="submit" class="button" Value="Withdraw" name="withdraw">
      <input type="submit" class="button" Value="Check Balance" name="checkbal">
    </form>

    <button class="button" onclick="alert('Connecting to support...')">Chat with Support</button>

    <footer>
      &copy; 2024 Robin the Bank. All rights reserved.
    </footer>
  </div>

  <script>
    function submit_confirmation(action) {
      const account = document.getElementById("atmAccount").value;
      const amount = parseFloat(document.getElementById("atmAmount").value);

            
      /* Error checking: Account number must contain only numbers */
      if (!/^\d+$/.test(account)) {
        alert("Account number must contain only numbers.");
        return;
      }

      /* Error checking: Amount must be positive */
      if (isNaN(amount) || amount <= 0) {
        alert("Please enter non negative value.");
        return;
      }

      let receiptUrl = "";
      if (action === "Deposit") {
        receiptUrl = `atmdepositreceipt.html?account=${account}&amount=${amount}`;
      } else if (action === "Withdraw") {
        receiptUrl = `atmwithdrawlreceipt.html?account=${account}&amount=${amount}`;
      } else if (action === "Check Balance") {
        receiptUrl = `atmbalancereceipt.html?account=${account}`;
      }

      window.open(receiptUrl, "_blank");

      alert(`Your ${action} request has been successfully submitted.`);
      window.location.reload();
    }
  </script>
</body>

</html>
